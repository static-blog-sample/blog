language: python

python:
  - "2.7"

env:
  global:
    - secure: "FF/hzAGl1+FJey4VlK5V4o2DvVQ7yp5Nwj07YlJHogzyNn6SiR2gVhlci9WPDlV/QpmUNBjXAIfscaYWejDiGJd7NvRFBttnRRAtAgiPMK4yOuRMNg9O0uHrgcXh/dCcD5UM+p55AHubFcKFJYPpP1LokplQZe1UuHn81EUsJsg="

install:
  - pip install -r requirements.txt

script:
  - make publish
  - git config --global user.email "libsora25@gmail.com"
  - git config --global user.name "Travis"
  - cd output
  - git pull origin master
  - git checkout master
  - git add -f .
  - git commit -a -m "add new site content"
  - git push https://${GH_TOKEN}@github.com/static-blog-sample/static-blog-sample.github.io.git master